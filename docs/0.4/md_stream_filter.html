<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GrPPI: Filter pattern</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GrPPI
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Generic and Reusable Parallel Pattern Interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Filter pattern </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <b>filter</b> (or <em>stream filter</em>) is a streaming pattern that discards items from a data stream based on a predicate, so that only data items satisfying (keep) or dissatisfying (discard) the predicate are passed to the next stage. This streaming pattern can only be used inside another pattern and consequently does not take an execution policy itself, but uses the execution policy of its enclosing pattern.</p>
<p>The interface to the <b>filter</b> pattern is provided by functions <code><a class="el" href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2" title="Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....">grppi::keep()</a></code> and <code><a class="el" href="group__filter__pattern.html#gab8bcbdf6de8a446a291162ee4e7f7944" title="Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....">grppi::discard()</a></code>.</p>
<div class="fragment"><div class="line"><a class="code" href="group__pipeline__pattern.html#gaf3942c499118a951617b95c4ee10a502">grppi::pipeline</a>(exec,</div>
<div class="line">  stage1,</div>
<div class="line">  <a class="code" href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2">grppi::keep</a>(predicate1),</div>
<div class="line">  <a class="code" href="group__filter__pattern.html#gab8bcbdf6de8a446a291162ee4e7f7944">grppi::discard</a>(predicate2),</div>
<div class="line">  stage3,</div>
<div class="line">  stage4);</div>
<div class="ttc" id="agroup__filter__pattern_html_gab8bcbdf6de8a446a291162ee4e7f7944"><div class="ttname"><a href="group__filter__pattern.html#gab8bcbdf6de8a446a291162ee4e7f7944">grppi::discard</a></div><div class="ttdeci">auto discard(Predicate &amp;&amp;predicate_op)</div><div class="ttdoc">Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....</div><div class="ttdef"><b>Definition:</b> stream_filter.h:58</div></div>
<div class="ttc" id="agroup__filter__pattern_html_gabc3773f21c14b2272c5ff404b4e9f8c2"><div class="ttname"><a href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2">grppi::keep</a></div><div class="ttdeci">auto keep(Predicate &amp;&amp;predicate_op)</div><div class="ttdoc">Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....</div><div class="ttdef"><b>Definition:</b> stream_filter.h:42</div></div>
<div class="ttc" id="agroup__pipeline__pattern_html_gaf3942c499118a951617b95c4ee10a502"><div class="ttname"><a href="group__pipeline__pattern.html#gaf3942c499118a951617b95c4ee10a502">grppi::pipeline</a></div><div class="ttdeci">void pipeline(const Execution &amp;ex, Generator &amp;&amp;generate_op, Transformers &amp;&amp;... transform_ops)</div><div class="ttdoc">Invoke Pipeline pattern on a data stream.</div><div class="ttdef"><b>Definition:</b> pipeline.h:46</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md691"></a>
Stream filter variants</h1>
<p>There is a single variant:</p>
<ul>
<li><em>Composable filter</em>: Defines a filter that can be used as a building block by another pattern (e.g. a pipeline).</li>
</ul>
<h1><a class="anchor" id="autotoc_md692"></a>
Key elements in stream filter</h1>
<p>The central element in a <b>filter</b> is the <b>Predicate</b>. The operation may be any C++ callable entity. This operation, is a unary operation taking a data item and returning value that is contextually convertible to <code>bool</code>. Thus, a predicate <code>pred</code> is any operation, that given a value <code>x</code> of type <code>T</code>, makes the following valid:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (predicate(item)) { <span class="comment">/*...*/</span> }. </div>
<div class="line"><span class="keywordflow">if</span> (!predicate(item)) { <span class="comment">/*...*/</span> }. </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md693"></a>
Details on stream filter variants</h1>
<h2><a class="anchor" id="autotoc_md694"></a>
Composable filter</h2>
<p>A composable filter has a single element:</p>
<ul>
<li>A <b>Predicate</b> filtering values.</li>
</ul>
<p>The input values will be generated by the upper level pattern, which will be also responsible for consuming the output values.</p>
<hr  />
<p> <b>Example</b>: A filter stage in a pipeline. </p><div class="fragment"><div class="line"><a class="code" href="group__pipeline__pattern.html#gaf3942c499118a951617b95c4ee10a502">grppi::pipeline</a>(exec,</div>
<div class="line">  stageA,</div>
<div class="line">  stageB,</div>
<div class="line">  <a class="code" href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2">grppi::keep</a>([](<span class="keyword">auto</span> x) { <span class="keywordflow">return</span> x.lenght()&gt;4; }),</div>
<div class="line">  stageC</div>
<div class="line">  );</div>
</div><!-- fragment --> <hr  />
<p> <b>Note</b>: For brevity we do not show here the details of other stages.</p>
<p>For composing complex patterns, the <code><a class="el" href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2" title="Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....">keep()</a></code> and <code><a class="el" href="group__filter__pattern.html#gab8bcbdf6de8a446a291162ee4e7f7944" title="Invoke md_stream-filter on a data stream that can be composed in other streaming patterns....">discard()</a></code> functions may be used to create an object that may be supplied to another pattern to build a composed pattern.</p>
<hr  />
<p> <b>Example</b>: A composable filter stage in a pipeline. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> keep_odd = <a class="code" href="group__filter__pattern.html#gabc3773f21c14b2272c5ff404b4e9f8c2">grppi::keep</a>(</div>
<div class="line">  [](<span class="keyword">auto</span> x) { <span class="keywordflow">return</span> x%2; });</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__pipeline__pattern.html#gaf3942c499118a951617b95c4ee10a502">grppi::pipeline</a>(exec,</div>
<div class="line">  stageA,</div>
<div class="line">  stageB,</div>
<div class="line">  keep_odd,</div>
<div class="line">  stageC</div>
<div class="line">  );</div>
</div><!-- fragment --> <hr  />
<p> <b>Note</b>: For brevity we do not show here the details of other stages. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
